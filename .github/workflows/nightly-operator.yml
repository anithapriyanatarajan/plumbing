name: Nightly Operator Release

on:
  schedule:
    - cron: '0 4 * * *'  # Daily at 4am UTC
  workflow_dispatch:
    inputs:
      run-tests:
        description: 'Run tests during release'
        required: false
        type: boolean
        default: false

jobs:
  release:
    uses: ./.github/workflows/nightly-release-template.yml
    with:
      project-name: 'operator'
      git-repository: 'tektoncd/operator'
      container-registry: 'ghcr.io'
      container-registry-path: 'tektoncd/operator'
      run-tests: ${{ inputs.run-tests || false }}
    secrets:
      RELEASE_SECRET: ${{ secrets.RELEASE_SECRET }}
      REGISTRY_TOKEN: ${{ secrets.GITHUB_TOKEN }} 